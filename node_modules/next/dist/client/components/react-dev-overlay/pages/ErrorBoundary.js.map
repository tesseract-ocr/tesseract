{"version":3,"sources":["../../../../../src/client/components/react-dev-overlay/pages/ErrorBoundary.tsx"],"sourcesContent":["import * as React from 'react'\n\ntype ErrorBoundaryProps = {\n  children?: React.ReactNode\n  onError: (error: Error, componentStack: string | null) => void\n  globalOverlay?: boolean\n  isMounted?: boolean\n}\ntype ErrorBoundaryState = { error: Error | null }\n\nexport class ErrorBoundary extends React.PureComponent<\n  ErrorBoundaryProps,\n  ErrorBoundaryState\n> {\n  state = { error: null }\n\n  static getDerivedStateFromError(error: Error) {\n    return { error }\n  }\n\n  componentDidCatch(\n    error: Error,\n    // Loosely typed because it depends on the React version and was\n    // accidentally excluded in some versions.\n    errorInfo?: { componentStack?: string | null }\n  ) {\n    this.props.onError(error, errorInfo?.componentStack || null)\n    if (!this.props.globalOverlay) {\n      this.setState({ error })\n    }\n  }\n\n  // Explicit type is needed to avoid the generated `.d.ts` having a wide return type that could be specific to the `@types/react` version.\n  render(): React.ReactNode {\n    // The component has to be unmounted or else it would continue to error\n    return this.state.error ||\n      (this.props.globalOverlay && this.props.isMounted) ? (\n      // When the overlay is global for the application and it wraps a component rendering `<html>`\n      // we have to render the html shell otherwise the shadow root will not be able to attach\n      this.props.globalOverlay ? (\n        <html>\n          <head></head>\n          <body></body>\n        </html>\n      ) : null\n    ) : (\n      this.props.children\n    )\n  }\n}\n"],"names":["ErrorBoundary","React","PureComponent","getDerivedStateFromError","error","componentDidCatch","errorInfo","props","onError","componentStack","globalOverlay","setState","render","state","isMounted","html","head","body","children"],"mappings":";;;;+BAUaA;;;eAAAA;;;;;iEAVU;AAUhB,MAAMA,sBAAsBC,OAAMC,aAAa;IAMpD,OAAOC,yBAAyBC,KAAY,EAAE;QAC5C,OAAO;YAAEA;QAAM;IACjB;IAEAC,kBACED,KAAY,EACZ,gEAAgE;IAChE,0CAA0C;IAC1CE,SAA8C,EAC9C;QACA,IAAI,CAACC,KAAK,CAACC,OAAO,CAACJ,OAAOE,CAAAA,6BAAAA,UAAWG,cAAc,KAAI;QACvD,IAAI,CAAC,IAAI,CAACF,KAAK,CAACG,aAAa,EAAE;YAC7B,IAAI,CAACC,QAAQ,CAAC;gBAAEP;YAAM;QACxB;IACF;IAEA,yIAAyI;IACzIQ,SAA0B;QACxB,uEAAuE;QACvE,OAAO,IAAI,CAACC,KAAK,CAACT,KAAK,IACpB,IAAI,CAACG,KAAK,CAACG,aAAa,IAAI,IAAI,CAACH,KAAK,CAACO,SAAS,GACjD,6FAA6F;QAC7F,wFAAwF;QACxF,IAAI,CAACP,KAAK,CAACG,aAAa,iBACtB,sBAACK;;8BACC,qBAACC;8BACD,qBAACC;;aAED,OAEJ,IAAI,CAACV,KAAK,CAACW,QAAQ;IAEvB;;QAtCK,qBAILL,QAAQ;YAAET,OAAO;QAAK;;AAmCxB"}