{"version":3,"sources":["../../../../src/lib/metadata/generate/basic.tsx"],"sourcesContent":["import type {\n  ResolvedMetadata,\n  ResolvedViewport,\n  Viewport,\n} from '../types/metadata-interface'\nimport type { ViewportLayout } from '../types/extra-types'\n\nimport React from 'react'\nimport { Meta, MetaFilter, MultiMeta } from './meta'\nimport { ViewportMetaKeys } from '../constants'\nimport { getOrigin } from './utils'\n\n// convert viewport object to string for viewport meta tag\nfunction resolveViewportLayout(viewport: Viewport) {\n  let resolved: string | null = null\n\n  if (viewport && typeof viewport === 'object') {\n    resolved = ''\n    for (const viewportKey_ in ViewportMetaKeys) {\n      const viewportKey = viewportKey_ as keyof ViewportLayout\n      if (viewportKey in viewport) {\n        let value = viewport[viewportKey]\n        if (typeof value === 'boolean') value = value ? 'yes' : 'no'\n        if (resolved) resolved += ', '\n        resolved += `${ViewportMetaKeys[viewportKey]}=${value}`\n      }\n    }\n  }\n  return resolved\n}\n\nexport function ViewportMeta({ viewport }: { viewport: ResolvedViewport }) {\n  return MetaFilter([\n    Meta({ name: 'viewport', content: resolveViewportLayout(viewport) }),\n    ...(viewport.themeColor\n      ? viewport.themeColor.map((themeColor) =>\n          Meta({\n            name: 'theme-color',\n            content: themeColor.color,\n            media: themeColor.media,\n          })\n        )\n      : []),\n    Meta({ name: 'color-scheme', content: viewport.colorScheme }),\n  ])\n}\n\nexport function BasicMeta({ metadata }: { metadata: ResolvedMetadata }) {\n  const manifestOrigin = metadata.manifest\n    ? getOrigin(metadata.manifest)\n    : undefined\n\n  return MetaFilter([\n    <meta charSet=\"utf-8\" />,\n    metadata.title !== null && metadata.title.absolute ? (\n      <title>{metadata.title.absolute}</title>\n    ) : null,\n    Meta({ name: 'description', content: metadata.description }),\n    Meta({ name: 'application-name', content: metadata.applicationName }),\n    ...(metadata.authors\n      ? metadata.authors.map((author) => [\n          author.url ? (\n            <link rel=\"author\" href={author.url.toString()} />\n          ) : null,\n          Meta({ name: 'author', content: author.name }),\n        ])\n      : []),\n    metadata.manifest ? (\n      <link\n        rel=\"manifest\"\n        href={metadata.manifest.toString()}\n        // If it's same origin, and it's a preview deployment,\n        // including credentials for manifest request.\n        crossOrigin={\n          !manifestOrigin && process.env.VERCEL_ENV === 'preview'\n            ? 'use-credentials'\n            : undefined\n        }\n      />\n    ) : null,\n    Meta({ name: 'generator', content: metadata.generator }),\n    Meta({ name: 'keywords', content: metadata.keywords?.join(',') }),\n    Meta({ name: 'referrer', content: metadata.referrer }),\n    Meta({ name: 'creator', content: metadata.creator }),\n    Meta({ name: 'publisher', content: metadata.publisher }),\n    Meta({ name: 'robots', content: metadata.robots?.basic }),\n    Meta({ name: 'googlebot', content: metadata.robots?.googleBot }),\n    Meta({ name: 'abstract', content: metadata.abstract }),\n    ...(metadata.archives\n      ? metadata.archives.map((archive) => (\n          <link rel=\"archives\" href={archive} />\n        ))\n      : []),\n    ...(metadata.assets\n      ? metadata.assets.map((asset) => <link rel=\"assets\" href={asset} />)\n      : []),\n    ...(metadata.bookmarks\n      ? metadata.bookmarks.map((bookmark) => (\n          <link rel=\"bookmarks\" href={bookmark} />\n        ))\n      : []),\n    Meta({ name: 'category', content: metadata.category }),\n    Meta({ name: 'classification', content: metadata.classification }),\n    ...(metadata.other\n      ? Object.entries(metadata.other).map(([name, content]) => {\n          if (Array.isArray(content)) {\n            return content.map((contentItem) =>\n              Meta({ name, content: contentItem })\n            )\n          } else {\n            return Meta({ name, content })\n          }\n        })\n      : []),\n  ])\n}\n\nexport function ItunesMeta({ itunes }: { itunes: ResolvedMetadata['itunes'] }) {\n  if (!itunes) return null\n  const { appId, appArgument } = itunes\n  let content = `app-id=${appId}`\n  if (appArgument) {\n    content += `, app-argument=${appArgument}`\n  }\n  return <meta name=\"apple-itunes-app\" content={content} />\n}\n\nexport function FacebookMeta({\n  facebook,\n}: {\n  facebook: ResolvedMetadata['facebook']\n}) {\n  if (!facebook) return null\n\n  const { appId, admins } = facebook\n\n  return MetaFilter([\n    appId ? <meta property=\"fb:app_id\" content={appId} /> : null,\n    ...(admins\n      ? admins.map((admin) => <meta property=\"fb:admins\" content={admin} />)\n      : []),\n  ])\n}\n\nconst formatDetectionKeys = [\n  'telephone',\n  'date',\n  'address',\n  'email',\n  'url',\n] as const\nexport function FormatDetectionMeta({\n  formatDetection,\n}: {\n  formatDetection: ResolvedMetadata['formatDetection']\n}) {\n  if (!formatDetection) return null\n  let content = ''\n  for (const key of formatDetectionKeys) {\n    if (key in formatDetection) {\n      if (content) content += ', '\n      content += `${key}=no`\n    }\n  }\n  return <meta name=\"format-detection\" content={content} />\n}\n\nexport function AppleWebAppMeta({\n  appleWebApp,\n}: {\n  appleWebApp: ResolvedMetadata['appleWebApp']\n}) {\n  if (!appleWebApp) return null\n\n  const { capable, title, startupImage, statusBarStyle } = appleWebApp\n\n  return MetaFilter([\n    capable ? Meta({ name: 'mobile-web-app-capable', content: 'yes' }) : null,\n    Meta({ name: 'apple-mobile-web-app-title', content: title }),\n    startupImage\n      ? startupImage.map((image) => (\n          <link\n            href={image.url}\n            media={image.media}\n            rel=\"apple-touch-startup-image\"\n          />\n        ))\n      : null,\n    statusBarStyle\n      ? Meta({\n          name: 'apple-mobile-web-app-status-bar-style',\n          content: statusBarStyle,\n        })\n      : null,\n  ])\n}\n\nexport function VerificationMeta({\n  verification,\n}: {\n  verification: ResolvedMetadata['verification']\n}) {\n  if (!verification) return null\n\n  return MetaFilter([\n    MultiMeta({\n      namePrefix: 'google-site-verification',\n      contents: verification.google,\n    }),\n    MultiMeta({ namePrefix: 'y_key', contents: verification.yahoo }),\n    MultiMeta({\n      namePrefix: 'yandex-verification',\n      contents: verification.yandex,\n    }),\n    MultiMeta({ namePrefix: 'me', contents: verification.me }),\n    ...(verification.other\n      ? Object.entries(verification.other).map(([key, value]) =>\n          MultiMeta({ namePrefix: key, contents: value })\n        )\n      : []),\n  ])\n}\n"],"names":["AppleWebAppMeta","BasicMeta","FacebookMeta","FormatDetectionMeta","ItunesMeta","VerificationMeta","ViewportMeta","resolveViewportLayout","viewport","resolved","viewportKey_","ViewportMetaKeys","viewportKey","value","MetaFilter","Meta","name","content","themeColor","map","color","media","colorScheme","metadata","manifestOrigin","manifest","getOrigin","undefined","meta","charSet","title","absolute","description","applicationName","authors","author","url","link","rel","href","toString","crossOrigin","process","env","VERCEL_ENV","generator","keywords","join","referrer","creator","publisher","robots","basic","googleBot","abstract","archives","archive","assets","asset","bookmarks","bookmark","category","classification","other","Object","entries","Array","isArray","contentItem","itunes","appId","appArgument","facebook","admins","property","admin","formatDetectionKeys","formatDetection","key","appleWebApp","capable","startupImage","statusBarStyle","image","verification","MultiMeta","namePrefix","contents","google","yahoo","yandex","me"],"mappings":"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"}