{"version":3,"sources":["../../../src/build/templates/edge-ssr-app.ts"],"sourcesContent":["import '../../server/web/globals'\nimport { adapter } from '../../server/web/adapter'\nimport { getRender } from '../webpack/loaders/next-edge-ssr-loader/render'\nimport { IncrementalCache } from '../../server/lib/incremental-cache'\n\nimport { renderToHTMLOrFlight as renderToHTML } from '../../server/app-render/app-render'\nimport * as pageMod from 'VAR_USERLAND'\n\nimport type { DocumentType } from '../../shared/lib/utils'\nimport type { BuildManifest } from '../../server/get-page-files'\nimport type { RequestData } from '../../server/web/types'\nimport type { NextConfigComplete } from '../../server/config-shared'\nimport { PAGE_TYPES } from '../../lib/page-types'\nimport { setReferenceManifestsSingleton } from '../../server/app-render/encryption-utils'\nimport { createServerModuleMap } from '../../server/app-render/action-utils'\n\ndeclare const incrementalCacheHandler: any\n// OPTIONAL_IMPORT:incrementalCacheHandler\n\nconst cacheHandlers = {}\n\nif (!(globalThis as any).__nextCacheHandlers) {\n  ;(globalThis as any).__nextCacheHandlers = cacheHandlers\n}\n\nconst Document: DocumentType = null!\nconst appMod = null\nconst errorMod = null\nconst error500Mod = null\n\n// injected by the loader afterwards.\ndeclare const sriEnabled: boolean\ndeclare const isServerComponent: boolean\ndeclare const dev: boolean\ndeclare const serverActions: any\ndeclare const nextConfig: NextConfigComplete\n// INJECT:sriEnabled\n// INJECT:isServerComponent\n// INJECT:dev\n// INJECT:serverActions\n// INJECT:nextConfig\n\nconst maybeJSONParse = (str?: string) => (str ? JSON.parse(str) : undefined)\n\nconst buildManifest: BuildManifest = self.__BUILD_MANIFEST as any\nconst reactLoadableManifest = maybeJSONParse(self.__REACT_LOADABLE_MANIFEST)\nconst rscManifest = self.__RSC_MANIFEST?.['VAR_PAGE']\nconst rscServerManifest = maybeJSONParse(self.__RSC_SERVER_MANIFEST)\nconst subresourceIntegrityManifest = sriEnabled\n  ? maybeJSONParse(self.__SUBRESOURCE_INTEGRITY_MANIFEST)\n  : undefined\nconst nextFontManifest = maybeJSONParse(self.__NEXT_FONT_MANIFEST)\n\nconst interceptionRouteRewrites =\n  maybeJSONParse(self.__INTERCEPTION_ROUTE_REWRITE_MANIFEST) ?? []\n\nif (rscManifest && rscServerManifest) {\n  setReferenceManifestsSingleton({\n    page: 'VAR_PAGE',\n    clientReferenceManifest: rscManifest,\n    serverActionsManifest: rscServerManifest,\n    serverModuleMap: createServerModuleMap({\n      serverActionsManifest: rscServerManifest,\n    }),\n  })\n}\n\nconst render = getRender({\n  pagesType: PAGE_TYPES.APP,\n  dev,\n  page: 'VAR_PAGE',\n  appMod,\n  pageMod,\n  errorMod,\n  error500Mod,\n  Document,\n  buildManifest,\n  renderToHTML,\n  reactLoadableManifest,\n  clientReferenceManifest: isServerComponent ? rscManifest : null,\n  serverActionsManifest: isServerComponent ? rscServerManifest : null,\n  serverActions: isServerComponent ? serverActions : undefined,\n  subresourceIntegrityManifest,\n  config: nextConfig,\n  buildId: process.env.__NEXT_BUILD_ID!,\n  nextFontManifest,\n  incrementalCacheHandler,\n  interceptionRouteRewrites,\n})\n\nexport const ComponentMod = pageMod\n\nexport default function nHandler(opts: { page: string; request: RequestData }) {\n  return adapter({\n    ...opts,\n    IncrementalCache,\n    handler: render,\n  })\n}\n"],"names":["ComponentMod","nHandler","self","cacheHandlers","globalThis","__nextCacheHandlers","Document","appMod","errorMod","error500Mod","maybeJSONParse","str","JSON","parse","undefined","buildManifest","__BUILD_MANIFEST","reactLoadableManifest","__REACT_LOADABLE_MANIFEST","rscManifest","__RSC_MANIFEST","rscServerManifest","__RSC_SERVER_MANIFEST","subresourceIntegrityManifest","sriEnabled","__SUBRESOURCE_INTEGRITY_MANIFEST","nextFontManifest","__NEXT_FONT_MANIFEST","interceptionRouteRewrites","__INTERCEPTION_ROUTE_REWRITE_MANIFEST","setReferenceManifestsSingleton","page","clientReferenceManifest","serverActionsManifest","serverModuleMap","createServerModuleMap","render","getRender","pagesType","PAGE_TYPES","APP","dev","pageMod","renderToHTML","isServerComponent","serverActions","config","nextConfig","buildId","process","env","__NEXT_BUILD_ID","incrementalCacheHandler","opts","adapter","IncrementalCache","handler"],"mappings":";;;;;;;;;;;;;;;IA0FaA,YAAY;eAAZA;;IAEb,OAMC;eANuBC;;;QA5FjB;yBACiB;wBACE;kCACO;2BAEoB;sEAC5B;2BAME;iCACoB;6BACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAgClBC;AA7BpB,0CAA0C;AAE1C,MAAMC,gBAAgB,CAAC;AAEvB,IAAI,CAAC,AAACC,WAAmBC,mBAAmB,EAAE;;IAC1CD,WAAmBC,mBAAmB,GAAGF;AAC7C;AAEA,MAAMG,WAAyB;AAC/B,MAAMC,SAAS;AACf,MAAMC,WAAW;AACjB,MAAMC,cAAc;AAQpB,oBAAoB;AACpB,2BAA2B;AAC3B,aAAa;AACb,uBAAuB;AACvB,oBAAoB;AAEpB,MAAMC,iBAAiB,CAACC,MAAkBA,MAAMC,KAAKC,KAAK,CAACF,OAAOG;AAElE,MAAMC,gBAA+Bb,KAAKc,gBAAgB;AAC1D,MAAMC,wBAAwBP,eAAeR,KAAKgB,yBAAyB;AAC3E,MAAMC,eAAcjB,uBAAAA,KAAKkB,cAAc,qBAAnBlB,oBAAqB,CAAC,WAAW;AACrD,MAAMmB,oBAAoBX,eAAeR,KAAKoB,qBAAqB;AACnE,MAAMC,+BAA+BC,aACjCd,eAAeR,KAAKuB,gCAAgC,IACpDX;AACJ,MAAMY,mBAAmBhB,eAAeR,KAAKyB,oBAAoB;AAEjE,MAAMC,4BACJlB,eAAeR,KAAK2B,qCAAqC,KAAK,EAAE;AAElE,IAAIV,eAAeE,mBAAmB;IACpCS,IAAAA,+CAA8B,EAAC;QAC7BC,MAAM;QACNC,yBAAyBb;QACzBc,uBAAuBZ;QACvBa,iBAAiBC,IAAAA,kCAAqB,EAAC;YACrCF,uBAAuBZ;QACzB;IACF;AACF;AAEA,MAAMe,SAASC,IAAAA,iBAAS,EAAC;IACvBC,WAAWC,qBAAU,CAACC,GAAG;IACzBC;IACAV,MAAM;IACNxB;IACAmC,SAAAA;IACAlC;IACAC;IACAH;IACAS;IACA4B,cAAAA,+BAAY;IACZ1B;IACAe,yBAAyBY,oBAAoBzB,cAAc;IAC3Dc,uBAAuBW,oBAAoBvB,oBAAoB;IAC/DwB,eAAeD,oBAAoBC,gBAAgB/B;IACnDS;IACAuB,QAAQC;IACRC,SAASC,QAAQC,GAAG,CAACC,eAAe;IACpCzB;IACA0B;IACAxB;AACF;AAEO,MAAM5B,eAAe0C;AAEb,SAASzC,SAASoD,IAA4C;IAC3E,OAAOC,IAAAA,gBAAO,EAAC;QACb,GAAGD,IAAI;QACPE,kBAAAA,kCAAgB;QAChBC,SAASpB;IACX;AACF"}