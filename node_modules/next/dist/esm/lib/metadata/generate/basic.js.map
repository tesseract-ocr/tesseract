{"version":3,"sources":["../../../../src/lib/metadata/generate/basic.tsx"],"sourcesContent":["import type {\n  ResolvedMetadata,\n  ResolvedViewport,\n  Viewport,\n} from '../types/metadata-interface'\nimport type { ViewportLayout } from '../types/extra-types'\n\nimport React from 'react'\nimport { Meta, MetaFilter, MultiMeta } from './meta'\nimport { ViewportMetaKeys } from '../constants'\nimport { getOrigin } from './utils'\n\n// convert viewport object to string for viewport meta tag\nfunction resolveViewportLayout(viewport: Viewport) {\n  let resolved: string | null = null\n\n  if (viewport && typeof viewport === 'object') {\n    resolved = ''\n    for (const viewportKey_ in ViewportMetaKeys) {\n      const viewportKey = viewportKey_ as keyof ViewportLayout\n      if (viewportKey in viewport) {\n        let value = viewport[viewportKey]\n        if (typeof value === 'boolean') value = value ? 'yes' : 'no'\n        if (resolved) resolved += ', '\n        resolved += `${ViewportMetaKeys[viewportKey]}=${value}`\n      }\n    }\n  }\n  return resolved\n}\n\nexport function ViewportMeta({ viewport }: { viewport: ResolvedViewport }) {\n  return MetaFilter([\n    Meta({ name: 'viewport', content: resolveViewportLayout(viewport) }),\n    ...(viewport.themeColor\n      ? viewport.themeColor.map((themeColor) =>\n          Meta({\n            name: 'theme-color',\n            content: themeColor.color,\n            media: themeColor.media,\n          })\n        )\n      : []),\n    Meta({ name: 'color-scheme', content: viewport.colorScheme }),\n  ])\n}\n\nexport function BasicMeta({ metadata }: { metadata: ResolvedMetadata }) {\n  const manifestOrigin = metadata.manifest\n    ? getOrigin(metadata.manifest)\n    : undefined\n\n  return MetaFilter([\n    <meta charSet=\"utf-8\" />,\n    metadata.title !== null && metadata.title.absolute ? (\n      <title>{metadata.title.absolute}</title>\n    ) : null,\n    Meta({ name: 'description', content: metadata.description }),\n    Meta({ name: 'application-name', content: metadata.applicationName }),\n    ...(metadata.authors\n      ? metadata.authors.map((author) => [\n          author.url ? (\n            <link rel=\"author\" href={author.url.toString()} />\n          ) : null,\n          Meta({ name: 'author', content: author.name }),\n        ])\n      : []),\n    metadata.manifest ? (\n      <link\n        rel=\"manifest\"\n        href={metadata.manifest.toString()}\n        // If it's same origin, and it's a preview deployment,\n        // including credentials for manifest request.\n        crossOrigin={\n          !manifestOrigin && process.env.VERCEL_ENV === 'preview'\n            ? 'use-credentials'\n            : undefined\n        }\n      />\n    ) : null,\n    Meta({ name: 'generator', content: metadata.generator }),\n    Meta({ name: 'keywords', content: metadata.keywords?.join(',') }),\n    Meta({ name: 'referrer', content: metadata.referrer }),\n    Meta({ name: 'creator', content: metadata.creator }),\n    Meta({ name: 'publisher', content: metadata.publisher }),\n    Meta({ name: 'robots', content: metadata.robots?.basic }),\n    Meta({ name: 'googlebot', content: metadata.robots?.googleBot }),\n    Meta({ name: 'abstract', content: metadata.abstract }),\n    ...(metadata.archives\n      ? metadata.archives.map((archive) => (\n          <link rel=\"archives\" href={archive} />\n        ))\n      : []),\n    ...(metadata.assets\n      ? metadata.assets.map((asset) => <link rel=\"assets\" href={asset} />)\n      : []),\n    ...(metadata.bookmarks\n      ? metadata.bookmarks.map((bookmark) => (\n          <link rel=\"bookmarks\" href={bookmark} />\n        ))\n      : []),\n    Meta({ name: 'category', content: metadata.category }),\n    Meta({ name: 'classification', content: metadata.classification }),\n    ...(metadata.other\n      ? Object.entries(metadata.other).map(([name, content]) => {\n          if (Array.isArray(content)) {\n            return content.map((contentItem) =>\n              Meta({ name, content: contentItem })\n            )\n          } else {\n            return Meta({ name, content })\n          }\n        })\n      : []),\n  ])\n}\n\nexport function ItunesMeta({ itunes }: { itunes: ResolvedMetadata['itunes'] }) {\n  if (!itunes) return null\n  const { appId, appArgument } = itunes\n  let content = `app-id=${appId}`\n  if (appArgument) {\n    content += `, app-argument=${appArgument}`\n  }\n  return <meta name=\"apple-itunes-app\" content={content} />\n}\n\nexport function FacebookMeta({\n  facebook,\n}: {\n  facebook: ResolvedMetadata['facebook']\n}) {\n  if (!facebook) return null\n\n  const { appId, admins } = facebook\n\n  return MetaFilter([\n    appId ? <meta property=\"fb:app_id\" content={appId} /> : null,\n    ...(admins\n      ? admins.map((admin) => <meta property=\"fb:admins\" content={admin} />)\n      : []),\n  ])\n}\n\nconst formatDetectionKeys = [\n  'telephone',\n  'date',\n  'address',\n  'email',\n  'url',\n] as const\nexport function FormatDetectionMeta({\n  formatDetection,\n}: {\n  formatDetection: ResolvedMetadata['formatDetection']\n}) {\n  if (!formatDetection) return null\n  let content = ''\n  for (const key of formatDetectionKeys) {\n    if (key in formatDetection) {\n      if (content) content += ', '\n      content += `${key}=no`\n    }\n  }\n  return <meta name=\"format-detection\" content={content} />\n}\n\nexport function AppleWebAppMeta({\n  appleWebApp,\n}: {\n  appleWebApp: ResolvedMetadata['appleWebApp']\n}) {\n  if (!appleWebApp) return null\n\n  const { capable, title, startupImage, statusBarStyle } = appleWebApp\n\n  return MetaFilter([\n    capable ? Meta({ name: 'mobile-web-app-capable', content: 'yes' }) : null,\n    Meta({ name: 'apple-mobile-web-app-title', content: title }),\n    startupImage\n      ? startupImage.map((image) => (\n          <link\n            href={image.url}\n            media={image.media}\n            rel=\"apple-touch-startup-image\"\n          />\n        ))\n      : null,\n    statusBarStyle\n      ? Meta({\n          name: 'apple-mobile-web-app-status-bar-style',\n          content: statusBarStyle,\n        })\n      : null,\n  ])\n}\n\nexport function VerificationMeta({\n  verification,\n}: {\n  verification: ResolvedMetadata['verification']\n}) {\n  if (!verification) return null\n\n  return MetaFilter([\n    MultiMeta({\n      namePrefix: 'google-site-verification',\n      contents: verification.google,\n    }),\n    MultiMeta({ namePrefix: 'y_key', contents: verification.yahoo }),\n    MultiMeta({\n      namePrefix: 'yandex-verification',\n      contents: verification.yandex,\n    }),\n    MultiMeta({ namePrefix: 'me', contents: verification.me }),\n    ...(verification.other\n      ? Object.entries(verification.other).map(([key, value]) =>\n          MultiMeta({ namePrefix: key, contents: value })\n        )\n      : []),\n  ])\n}\n"],"names":["React","Meta","MetaFilter","MultiMeta","ViewportMetaKeys","getOrigin","resolveViewportLayout","viewport","resolved","viewportKey_","viewportKey","value","ViewportMeta","name","content","themeColor","map","color","media","colorScheme","BasicMeta","metadata","manifestOrigin","manifest","undefined","meta","charSet","title","absolute","description","applicationName","authors","author","url","link","rel","href","toString","crossOrigin","process","env","VERCEL_ENV","generator","keywords","join","referrer","creator","publisher","robots","basic","googleBot","abstract","archives","archive","assets","asset","bookmarks","bookmark","category","classification","other","Object","entries","Array","isArray","contentItem","ItunesMeta","itunes","appId","appArgument","FacebookMeta","facebook","admins","property","admin","formatDetectionKeys","FormatDetectionMeta","formatDetection","key","AppleWebAppMeta","appleWebApp","capable","startupImage","statusBarStyle","image","VerificationMeta","verification","namePrefix","contents","google","yahoo","yandex","me"],"mappings":"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"}